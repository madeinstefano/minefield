/*
 MIT <http://szanata.com/mit.txt>
 @license GPL <http://szanata.com/gpl.txt>
 @author St?fano Stypulkowski <http://szanata.me>
 @hosted Github <http://github.com/madeinstefano/Lollipop>
 @version 1.1.2
 @require jquery 1.8+
 @compatible FF 3.5+
 @compatible Google Chrome 3+
 @compatible IE 6+
 @compatible Opera 10+
 @compatible Safari 5+
*/
(function(){function h(a){var c={},b;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function f(a){return"function"===typeof a}function p(){$(window).add("html, body").scrollTop(0).scrollLeft(0).on("scroll.lollipop",function(){var a=b.find("#lollipop-popup").outerWidth(!0),c=b.find("#lollipop-popup").outerHeight(!0);a<$(window).width()?$(window).scrollLeft(0):a<$(window).width()+$(window).scrollLeft()&&$(window).scrollLeft(a-$(window).width());c<$(window).height()?$(window).scrollTop(0):c<$(window).height()+
$(window).scrollTop()&&$(window).scrollTop(c-$(window).height())})}function k(){var a=($(window).width()-$("#lollipop-popup").outerWidth())/2,b=($(window).height()-$("#lollipop-popup").outerHeight())/2;$("#lollipop-popup").css({left:0>a?0:a,top:0>b?0:b})}function q(){$(window).on("resize.lollipop",function(){l();k()})}function l(){b.height(0).width(0).height($(document).height()<$(window).height()?$(window).height():$(document).height()).width($(document).width()<$(window).width()?$(window).width():
$(document).width())}function m(a){b.find("#lollipop-popup-footer").append(a.href?$('<a class="button"></a>').text(a.title).attr({href:a.href,target:a.target?a.target:"_blank"}).on("click",a.click):$("<button></button>").text(a.title).on("click",a.click))}function r(a){$(window).on("keydown.lollipop",function(b){if(27===b.keyCode){if(f(a.onCancel))a.onCancel();Lollipop.close()}})}function s(a){if(a.showFooter&&(a.buttons&&0!==a.buttons.length||a.showCancelButton)){b.find("#lollipop-popup-footer").empty().show();
if(a.buttons)for(var c=0,d=a.buttons.length;c<d;c++)m(a.buttons[c]);a.showCancelButton&&(m({title:a.cancelButtonTitle,click:function(){if(f(a.onCancel))a.onCancel();Lollipop.close()}}),r(a))}else b.find("#lollipop-popup-footer").empty().hide()}function t(a){b.find("#lollipop-popup").css({maxWidth:a.maxWidth||"auto",maxHeight:a.maxHeight||"auto",minWidth:a.minWidth||"auto",minHeight:a.minHeight||"auto",width:a.width||"auto",height:a.height||"auto"})}function u(a){a.showHeader&&a.title?b.find("#lollipop-popup-header").show().html(a.title):
b.find("#lollipop-popup-header").hide()}function v(){var a=$("<div></div>").css({clear:"both",width:0,height:0});b.find("#lollipop-popup-body").append(a)}function n(){b.find("#lollipop-popup").css("padding-bottom",b.find("#lollipop-popup-footer:visible").size()?b.find("#lollipop-popup-footer").outerHeight(!0):0);l();k();p();q();$(window).trigger("resize.lollipop")}var e={},d={minWidth:400,maxWidth:500,width:null,minHeight:200,maxHeight:400,height:null,animate:!0,animateOnClose:!0,title:null,showHeader:!0,
showFooter:!0,showCancelButton:!0,cancelButtonTitle:"Cancel",onCancel:null,content:null,onBeforeOpen:null,onOpen:null,onClose:null,buttons:[]},g=h(d),b=$("<div></div>").css({position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",zIndex:9999}).append($('<div id="lollipop-block-layer"></div>').css({position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}),$('<div id="lollipop-popup"></div>').css({maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:d.minHeight,
position:"absolute"}).append($('<div id="lollipop-popup-header"></div>').css({textOverflow:"ellipsis",overflow:"hidden"}),$('<div id="lollipop-popup-body"></div>'),$('<div id="lollipop-popup-footer"></div>').css({position:"absolute",bottom:"0px",left:"0px",right:"0px"})));Object.freeze&&Object.freeze(d);e.seeDefaults=function(){return h(d)};e.config=function(a){$.extend(g,d,a)};e.open=function(a){var c={};$.extend(c,g,a);u(c);b.find("#lollipop-popup-body").html("");b.find("#lollipop-popup-body").append(c.content);
b.data("__closeCallback",c.onClose);t(c);v();s(c);b.hide().appendTo($("body"));f(c.onBeforeOpen)&&c.onBeforeOpen.call(b[0]);c.animate?b.css("visibility","hidden").show(0,function(){n();b.hide().css("visibility","visible").fadeIn(function(){f(c.onOpen)&&c.onOpen.call(this)})}):b.show(0,function(){n();f(c.onOpen)&&c.onOpen.call(this)})};e.close=function(a){a||!g.animateOnClose?(b.find("#lollipop-popup-body").html(""),b.detach()):b.fadeOut(function(){b.find("#lollipop-popup-body").html("");b.detach()});
a=b.data("__closeCallback");f(a)&&a.call(b[0]);$(window).off("keydown.lollipop");$(window).off("resize.lollipop");$(window).add("html, body").off("scroll.lollipop")};Object.freeze&&Object.freeze(e);"function"===typeof define&&define.amd?define(function(){return e}):window.Lollipop=e})();
